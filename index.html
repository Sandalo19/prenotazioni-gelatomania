<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ristorante Bar Gelatomania - Prenotazioni</title>
<style>
* { box-sizing: border-box; }

html, body { margin:0; padding:0; height:100%; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

body {
  background: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ7qyB_gWAVXSCGVHqhNv-r0QHDUDOxm7ZbzA&s") no-repeat center center fixed;
  background-size: cover;
  color: #111;
}

body::before {
  content:"";
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.5);
  z-index: 0;
}

.container {
  position: relative;
  z-index: 1;
  max-width: 600px;
  margin: 50px auto;
  padding: 16px;
  animation: fadeIn 1s ease;
}

.card {
  background: rgba(255,255,255,0.95);
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  transition: transform 0.2s;
}

.card:hover { transform: translateY(-2px); }

h2, h3 { text-align:center; margin: 0 0 12px; }

label { display:block; font-size:0.9rem; margin-bottom:4px; color:#333; }
input, select, textarea { width:100%; padding:10px; border-radius:6px; border:1px solid #ccc; margin-bottom:12px; font-size:1rem; }

button {
  position: relative;
  overflow: hidden;
  width:100%;
  padding:12px;
  border:none;
  border-radius:8px;
  background:#A43F3F;
  color:white;
  font-size:1.1rem;
  font-weight:bold;
  cursor:pointer;
  transition: all 0.2s ease;
}

button:hover { background:#7a2b2b; transform: scale(1.03); }
button:active { transform: scale(0.97); }

/* effetto onda */
.ripple {
  position: absolute;
  border-radius: 50%;
  background: rgba(255,255,255,0.7);
  transform: scale(0);
  animation: ripple-animation 0.6s linear;
  pointer-events: none;
}

@keyframes ripple-animation {
  to { transform: scale(4); opacity: 0; }
}

.small { font-size:0.85rem; color:#555; text-align:center; }
#msg { margin-top:10px; position:relative; min-height:24px; }

.checkmark {
  display:inline-block;
  color: green;
  font-size: 1.5rem;
  margin-left:8px;
  opacity:0;
  transform: scale(0);
  transition: all 0.4s ease;
}

.show { opacity:1; transform: scale(1); }

.why-us { text-align:center; margin-top:24px; color:white; }
.why-us h3 { margin-bottom:12px; }
.why-us p { margin:6px 0; font-size:1rem; }

.info-restaurant { text-align:center; margin-top:20px; color:white; font-size:0.95rem; }

.info-restaurant a { color:white; text-decoration:underline; }

@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

@media (max-width:600px) { .container { margin:30px 16px; } }
</style>
</head>

<body>
<div class="container">
  <div class="card">
    <h2>Ristorante Bar Gelatomania</h2>
    <h3>Prenota il tuo tavolo</h3>

    <label>Nome <span style="color:red">*</span></label>
    <input id="name" type="text" placeholder="Il tuo nome" required>

    <label>Telefono <span style="color:red">*</span></label>
    <input id="phone" type="tel" placeholder="Numero di telefono" required>

    <label>Numero adulti *</label>
    <input id="adults" type="number" min="1" value="1" required>

    <label>Numero bambini</label>
    <input id="children" type="number" min="0" value="0">

    <label>Area del tavolo</label>
    <select id="area">
      <option value="inside">Dentro</option>
      <option value="outside">Fuori</option>
    </select>

    <label>Data *</label>
    <input id="date" type="date" required>

    <label>Orario (12:00 ‚Äì 14:30) *</label>
    <input id="time" type="time" min="12:00" max="14:30" required>

    <label>Note</label>
    <textarea id="notes" placeholder="Eventuali note"></textarea>

    <button id="bookBtn">Prenota</button>
    <div id="msg" class="small"><span class="checkmark" id="checkmark">‚úî</span></div>
  </div>

  <!-- Sezione informazioni ristorante/bar -->
  <div class="info-restaurant">
    <p>üìç <a href="https://www.google.com/maps/dir//Corso+Umberto+I,+77,+96100+Siracusa+SR/@37.1494916,15.1806428,14z/data=!3m1!4b1!4m8!4m7!1m0!1m5!1m1!1s0x1313ce9fd57e6e1d:0xfeaeb9406f2109a6!2m2!1d15.286934!2d37.0657725?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoASAFQAw%3D%3D" target="_blank">Corso Umberto I, 77, 96100 Siracusa SR</a></p>
    <p>üìû <a href="tel:+3909311960259">0931 196 0259</a></p>
    <p>üïí Orari:</p>
    <p>‚òï Bar: 7:30 ‚Äì 20:00</p>
    <p>üçΩÔ∏è Ristorante: 12:00 ‚Äì 14:30</p>
  </div>

  <div class="why-us">
    <h3>Perch√© sceglierci?</h3>
    <p>üç® Specialit√† gelati e dolci artigianali</p>
    <p>üè† Ambiente accogliente e familiare</p>
    <p>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Perfetto per gruppi e famiglie</p>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDhkuWdU6n2kvitoaHyK0jlyYrPLR_2wQ4",
  authDomain: "gelatomania-prenotazioni.firebaseapp.com",
  projectId: "gelatomania-prenotazioni",
  storageBucket: "gelatomania-prenotazioni.firebasestorage.app",
  messagingSenderId: "1077584417614",
  appId: "1:1077584417614:web:2dbf35b1f1c647c5ff041f",
  measurementId: "G-N283TL911D"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const bookBtn = document.getElementById('bookBtn');
const msgEl = document.getElementById('msg');
const checkmark = document.getElementById('checkmark');

function showMsg(text, isError=false) {
  msgEl.style.color = isError ? 'red' : 'green';
  msgEl.firstChild.nodeValue = text;
  if(!isError){
    checkmark.classList.add('show');
    setTimeout(()=>checkmark.classList.remove('show'),2000);
  }
  setTimeout(()=>msgEl.firstChild.nodeValue='',5000);
}

bookBtn.addEventListener('click', async (e) => {
  // Animazione onda
  const ripple = document.createElement('span');
  ripple.className = 'ripple';
  const rect = bookBtn.getBoundingClientRect();
  ripple.style.left = (e.clientX - rect.left) + 'px';
  ripple.style.top = (e.clientY - rect.top) + 'px';
  bookBtn.appendChild(ripple);
  setTimeout(()=>ripple.remove(), 600);

  // Salvataggio prenotazione
  const name = document.getElementById('name').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const adults = parseInt(document.getElementById('adults').value) || 0;
  const children = parseInt(document.getElementById('children').value) || 0;
  const area = document.getElementById('area').value;
  const date = document.getElementById('date').value;
  const time = document.getElementById('time').value;
  const notes = document.getElementById('notes').value.trim();

  if (!name || !phone || !date || !time || !adults) { showMsg('Compila tutti i campi obbligatori (*)', true); return; }
  if (time < "12:00" || time > "14:30") { showMsg('Orario non valido: scegli tra 12:00 e 14:30', true); return; }

  try {
    await db.collection('bookings').add({ name, phone, adults, children, area, date, time, notes, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
    showMsg('Prenotazione inviata con successo!');
    document.getElementById('name').value='';
    document.getElementById('phone').value='';
    document.getElementById('adults').value=1;
    document.getElementById('children').value=0;
    document.getElementById('notes').value='';
  } catch(err){ console.error(err); showMsg('Errore durante l\'invio della prenotazione', true); }
});
</script>
</body>
</html>
